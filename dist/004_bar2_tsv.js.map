{"version":3,"sources":["../004_bar2_tsv.js"],"names":["width","barHeight","height","x","d3","scaleLinear","range","chart","select","attr","tsv","type","then","console","log","data","domain","max","d","value","length","bar","selectAll","enter","append","i","text","name"],"mappings":";;AAAA;;;;;;AAQA,IAAMA,QAAQ,GAAd;AACA,IAAMC,YAAY,EAAlB;AACA,IAAMC,SAAS,GAAf;;AAEA,IAAMC,IAAIC,GAAGC,WAAH,GACLC,KADK,CACC,CAAC,CAAD,EAAGN,KAAH,CADD,CAAV;;AAGA;AACA,IAAMO,QAAQH,GAAGI,MAAH,CAAU,QAAV,EACTC,IADS,CACJ,OADI,EACKT,KADL,CAAd;AAEI;;;AAGJ;;;AAGAI,GAAGM,GAAH,CAAO,2BAAP,EAAoCC,IAApC,EAA0CC,IAA1C,CAAgD,gBAAQ;AACpDC,YAAQC,GAAR,CAAYC,IAAZ;;AAEAZ,MAAEa,MAAF,CAAS,CAAC,CAAD,EAAIZ,GAAGa,GAAH,CAAQF,IAAR,EAAc;AAAA,eAAKG,EAAEC,KAAP;AAAA,KAAd,CAAJ,CAAT;AACAZ,UAAME,IAAN,CAAW,QAAX,EAAqBR,YAAYc,KAAKK,MAAtC;;AAEA,QAAMC,MAAMd,MAAMe,SAAN,CAAgB,GAAhB,EACPP,IADO,CACFA,IADE,EAEPQ,KAFO,GAECC,MAFD,CAEQ,GAFR,EAGPf,IAHO,CAGF,WAHE,EAGW,UAACS,CAAD,EAAGO,CAAH;AAAA,eAAS,iBAAiBA,IAAIxB,SAArB,GAAiC,GAA1C;AAAA,KAHX,CAAZ;;AAKAoB,QAAIG,MAAJ,CAAW,MAAX,EACKf,IADL,CACU,OADV,EACmB;AAAA,eAAKN,EAAEe,EAAEC,KAAJ,CAAL;AAAA,KADnB,EAEKV,IAFL,CAEU,QAFV,EAEoBR,YAAU,CAF9B;;AAIAoB,QAAIG,MAAJ,CAAW,MAAX,EACKf,IADL,CACU,GADV,EACgB;AAAA,eAAKN,EAAEe,EAAEC,KAAJ,IAAa,CAAlB;AAAA,KADhB,EAEKV,IAFL,CAEU,GAFV,EAEeR,YAAY,CAF3B,EAGKQ,IAHL,CAGU,IAHV,EAGgB,OAHhB,EAIKiB,IAJL,CAIW;AAAA,eAAKR,EAAEC,KAAP;AAAA,KAJX;;AAMAE,QAAIG,MAAJ,CAAW,MAAX,EACKf,IADL,CACU,GADV,EACe,KADf,EAEKA,IAFL,CAEU,GAFV,EAEeR,YAAY,CAF3B,EAGKQ,IAHL,CAGU,IAHV,EAGgB,OAHhB,EAIKiB,IAJL,CAIW;AAAA,eAAKR,EAAES,IAAP;AAAA,KAJX;AAOH,CA5BD;;AA8BA,SAAShB,IAAT,CAAcO,CAAd,EAAiB;AACbA,MAAEC,KAAF,GAAU,CAACD,EAAEC,KAAb,CADa,CACO;AACpB,WAAOD,CAAP;AACH","file":"004_bar2_tsv.js","sourcesContent":["/**\n * Reference: https://bost.ocks.org/mike/bar/2/\n * Note #1: tsv use Promise to load data\n *\n */\n\n\n\nconst width = 800;\nconst barHeight = 30;\nconst height = 600;\n\nconst x = d3.scaleLinear()\n    .range([0,width]);\n\n/* The wrapper: chart */\nconst chart = d3.select(\".chart\")\n    .attr(\"width\", width);\n    // .attr(\"height\", height);\n\n\n/**\n * Note #1\n */\nd3.tsv(\"tsv/data_004_bar2_tsv.tsv\", type).then( data => {\n    console.log(data);\n\n    x.domain([0, d3.max( data, d => d.value )]);\n    chart.attr(\"height\", barHeight * data.length);\n\n    const bar = chart.selectAll(\"g\")\n        .data(data)\n        .enter().append(\"g\")\n        .attr(\"transform\", (d,i) => \"translate(0,\" + i * barHeight + \")\" );\n\n    bar.append(\"rect\")\n        .attr(\"width\", d => x(d.value) )\n        .attr(\"height\", barHeight-1);\n\n    bar.append(\"text\")\n        .attr(\"x\",  d => x(d.value) - 3 )\n        .attr(\"y\", barHeight / 2)\n        .attr(\"dy\", \".35em\")\n        .text( d => d.value );\n\n    bar.append(\"text\")\n        .attr(\"x\", \"6em\" )\n        .attr(\"y\", barHeight / 2)\n        .attr(\"dy\", \".35em\")\n        .text( d => d.name  );\n\n\n});\n\nfunction type(d) {\n    d.value = +d.value; // coerce to number\n    return d;\n}"]}